<!DOCTYPE html>
<html lang="en" class="loading">

<head>

	<script>
		window.dataLayer = window.dataLayer || [];
		var nombrecodigo = {percodnotif};
		dataLayer.push({'event' : 'login', 'userId' : nombrecodigo});
		</script>
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
		new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
		j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
		'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
		})(window,document,'script','dataLayer','GTM-MW2RMSR');</script>
		
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
	<meta name="description"
    content="BTBOX _your business toolbox. Todas las soluciones en una plataforma para potenciar tu próximo evento">
    <meta name="keywords"
    content="btbox, evento, fisico, hibrido, event, admin, btoolbox, networking, reuniones">
    <meta name="author" content="BTBOX">
	<title>{SisNombreEvento}</title>
    <link rel="shortcut icon" type="image/png" href="../assets-nuevodisenio/img/logo.jpg">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-touch-fullscreen" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="default">
	<link rel="stylesheet" type="text/css" href="../assets-nuevodisenio/index.css">

	<!-- script para levantar el navbar -->
	<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
	<!-- ---------------------------------- X ---------------------------------- -->
</head>

<body data-col="2-columns" class=" 2-columns " >

	<div class="wrapper nav-collapsed menu-collapsed">
		<!-- Navigation bar -->
		<div id="nav-placeholder">

		</div>

		<script>
			$(function () {
				var data = {
					"menu": "activeindex"
				};

				$("#nav-placeholder").load("../navbar/navbar.php", data);

			});
		</script>
		<!-- end of Navigation bar -->
	
<!--MENU FIN-->
	

		<div class="main-panel">
			<div class="main-content">
				<div class="content-wrapper">
					<div class="container-fluid">

						<!--Inicio TABLA -->
						<section id="shopping-cart">
							<div class="row">
								<div class="col-sm-12">
									<div class="card">
										<div class="card-header">
											<div class="card-title-wrap bar-warning">
												<h4 class="card-title">
													{Idioma_Perfiles}
													<a class="success p-0" style="position:absolute;right:20px;"
														title="Nuevo Registro" onclick="showMaestro(0);">
														<i class="fa ft-plus-circle font-medium-5 mr-2"></i>
													</a>
													<a id="navbar-notification-sidebar" href="javascript:;"
														class="nav-link notification-sidebar-toggle"
														style="position:absolute;right:70px; top:20px;">
														<i style="color:grey;" class="ft-filter">{Idioma_Filtros}</i>
														<p class="d-none">Notifications Sidebar</p>
													</a>
												</h4>
											</div>
										</div>
										<div id="databrw" class="card-body m-0">
											<div  class="container-seleccion d-flex justify-content-center">
												<div class="row col-md-12 col-sm-12"  id="fltpermisos">
													<div class="col-md-1 col-sm-2  icono-seleccion" style="margin-top: 3px;">
													</div>
													<div class="col-md-4 col-sm-10 mb-2">
														<select class="form-control" id="opciones" onchange="iconos();">
															<!-- <option value="disponibilidad">{permisoaccesos}</option> -->
															<!-- <option value="reuniones">{permisoreuniones}</option>
															<option value="mensajes">{permisomensajes}</option> -->
															<option value="liberar">{permisoliberar}</option>
															<option value="mails">{permisomails}</option>
															<option value="gafete">{enviargafete}</option>
															<!-- <option value="quitardisponibilidad">{revocaraccesos}</option>
															<option value="quitarreuniones">{revocarreuniones}</option>
															<option value="quitarmensajes">{revocarmensajes}</option> -->
														  </select>
													</div>
											
													<div class="col-md-6 col-sm-12">
														<button type="submit" class="btn btn-success boton-seleccion" value="{percodigo}" onclick="actPermisosMasivo(1,'X');">{permmasivos_send}</button>
														<button type="submit" class="btn btn-success boton-seleccion" value="{percodigo}" onclick="actPermisosMasivo(1,'Y');">{permmasivos_sendall}</button>
														<button id="botoncrearpdfs"  type="submit" class="btn btn-success boton-seleccion {displaycrear}" onclick="exportarPDFMasivas();">Descargar PDF Agendas</button>
													</div>
													<div class="table-responsive">
														<table id="recent-orders" class="table table-hover table-xl mb-0">
															<thead>
																<tr>
																	<th class="border-top-0" style="text-align: left; width: 10%;"></th>                                
																	<th class="border-top-0" style="text-align: left; width: 20%;">{Idioma_Nombre}</th>
																	<th class="border-top-0" style="text-align: left; width: 20%;">{Idioma_Apellido}</th>
																	<th class="border-top-0" style="text-align: left;width: 20%;">{Idioma_Compania}</th>
																	<th class="border-top-0" style="text-align: left;width: 10%;">{Idioma_ReunionesConf}</th>
																	<th class="border-top-0" style="text-align: right;">
																		<div class="d-flex justify-content-end mr-4 ">
																			<input  class="seleccionador " onchange="seleccionador();" style="width:57px; margin-right: 1px;" type="checkbox" >
																		</div>
																	</th>
																</tr>
																
															</thead>
															<tbody>

															</tbody>
														</table>
													</div>
												</div>
											</div>
											<div class="card-block" id="DataMaestro"></div>
											<div id="databrw1">
												<div class="card-block" id="DataBrowser"></div>
											</div>
											
										</div>

									</div>
								</div>
							</div>
						</section>
						<!--Fin TABLA -->

					</div>
				</div>
			</div>
		</div>
	</div> <!-- FIN- <div class="wrapper"> -->

	<!-- Modal -->
	<div class="modal fade p-0 text-left" id="DataMaestroDisp" tabindex="-1" role="dialog" aria-hidden="true"
		data-backdrop="static" data-keyboard="false">
		<div class="modal-dialog modal-lg" role="document" id="DataDisp" style="max-width:80%;">
		</div>
	</div>

	<div class="modal fade p-0 text-left" id="DataMaestroClasif" tabindex="-1" role="dialog" aria-hidden="true"
		data-backdrop="static" data-keyboard="false">
		<div class="modal-dialog modal-lg" role="document" id="DataClasif" style="max-width:1300px;">
		</div>
	</div>


	<!-- Inicio CONFIGURACION -->
	<aside id="notification-sidebar" class="notification-sidebar d-md-block">
		<a class="notification-sidebar-close">
			<i class="ft-x font-medium-3"></i>
		</a>
		<div class="side-nav notification-sidebar-content">
			<div class="row">
				<div class="col-12 mt-1">

					<div id="activity-timeline" class="col-12 timeline-left">
						<h6 class="m-3 text-bold-400 d-none">{Idioma_Filtros}</h6>
										<div class="px-2">
						
							<ul class="list-unstyled base-timeline activity-timeline ml-0">
								<li>
									<div class="col-md-12" style="text-align: right;">
										<a onclick="showEliminarFiltros();" class="text-uppercase texto-eliminar-filtro" >{Idioma_BuscartodosFiltro}</a>
									</div>	
								</li>
								<li>
									
									<div class="base-timeline-info">
										<a href="#" class="text-uppercase text-primary">{Idioma_Buscar}</a>
										<br>
										<div class="form-group row">
											<div class="col-md-12">
												<input type="text" id="fltnombre1" name="fltnombre" class="form-control"
													value="" placeholder="Por nombre, usuario, empresa, cargo, descripción, pais ..." onkeypress="KeyEnterBuscarNuevo(event)">
											</div>
										</div>
								</li>


								<li>
									<div class="timeline-icon bg-primary d-none">
										<i class="fa fa-plane"></i>
									</div>
									<div class="base-timeline-info">
										<a href="#" class="text-uppercase text-primary">{Idioma_OrdenarPor}...</a>
										<br>
										<select id="fltorden1" name="fltorden" class="form-control">
											<option value="1">{Idioma_Nombre}</option>
											<option value="2">{Idioma_Apellido}</option>
											<option value="3">{Idioma_Compania}</option>
											<option value="4">{Idioma_Reuniones}</option>
										</select>
								</li>

								<li>
									<div class="timeline-icon bg-primary d-none">
										<i class="fa fa-plane"></i>
									</div>
									<div class="base-timeline-info">
										<a href="#" class="text-uppercase text-primary">{Idioma_Estado}</a>
										<br>
										<select id="fltestado1" name="fltestado" class="form-control">
											<option value="0" selected>{Idioma_PLbtodos}</option>
											<option value="1">{Idioma_PLbactivos}</option>
											<option value="3">{Idioma_PLbeliminados}</option>
											<option value="8">{Idioma_PLbnoliberados}</option>
											<option value="9">{Idioma_PLbcorreonoconf}</option>
										</select>
								</li>

								<li>
									<div class="timeline-icon bg-primary d-none">
										<i class="fa fa-plane"></i>
									</div>
									<div class="base-timeline-info">
										<a href="#" class="text-uppercase text-primary">{Idioma_CBtipo}</a>
										<br>
										<select id="fltpertipo1" name="fltpertipo" class="form-control" onchange="loadClases1(this);">
											<option value="">{tipoperfil}</option>
											<!-- BEGIN pertipos -->
											<option value="{pertipcod}" {pertipsel}>{pertipdes}</option>
											<!-- END pertipos -->
										</select>
								</li>

								<li>
									<div class="timeline-icon bg-primary d-none">
										<i class="fa fa-plane"></i>
									</div>
									<div class="base-timeline-info">
										<a href="#" class="text-uppercase text-primary">{clase}</a>
										<br>
										<select id="fltperclase1" name="fltperclase1" class="form-control" {cmbperclase}>
											<option value="" selected>Select...</option>
											<!-- BEGIN perclases -->
											<option value="{perclacod}" {perclasel}>{perclades}</option>
											<!-- END perclases -->
										</select>
								</li>

							</ul>

							<div class="card-body">
								<div class="card-block">
									<form>
										<div class="form-group">
											<div class="text-center mt-4">
												<button type="button"
													class="btn btn-primary px-4 py-2 text-uppercase white font-small-4 box-shadow-2 border-0"
													onclick="showBrowser();">{buscar}</button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>


				</div>
			</div>
		</div>
	</aside>


	<!-- Fin CONFIGURACION -->

	<!-- BEGIN VENDOR JS-->
	<script src="../assets-nuevodisenio/vendors/js/core/jquery-3.3.1.min.js"></script>
	<script src="../assets-nuevodisenio/vendors/js/core/popper.min.js"></script>
	<script src="../assets-nuevodisenio/vendors/js/core/bootstrap.min.js"></script>
	<script src="../assets-nuevodisenio/vendors/js/perfect-scrollbar.jquery.min.js"></script>
	<script src="../assets-nuevodisenio/vendors/js/prism.min.js"></script>
	<script src="../assets-nuevodisenio/vendors/js/jquery.matchHeight-min.js"></script>
	<script src="../assets-nuevodisenio/vendors/js/screenfull.min.js"></script>
	<script src="../assets-nuevodisenio/vendors/js/pace/pace.min.js"></script>
	<!-- BEGIN VENDOR JS-->
	<!-- BEGIN PAGE VENDOR JS-->
	<!-- END PAGE VENDOR JS-->
	<!-- BEGIN CONVEX JS-->
	<script src="../assets-nuevodisenio/js/app-sidebar.js"></script>
	<!-- <script src="../assets-nuevodisenio/js/notification-sidebar.js"></script> -->
	<!-- END CONVEX JS-->
	<!-- BEGIN PAGE LEVEL JS-->
	<!-- END PAGE LEVEL JS-->

	<!-- BEGIN VENDOR JS-->
	<!-- BEGIN PAGE VENDOR JS-->
	<script src="../assets-nuevodisenio/vendors/js/sweetalert2.min.js"></script>
	<script src="../assets-nuevodisenio/vendors/js/toastr.min.js"></script>
	<script src="../assets-nuevodisenio/vendors/js/switchery.min.js"></script>
	<script src="../assets-nuevodisenio/js/socket.io.js"></script>
	<script src="../assets-nuevodisenio/js/notifnoden.js"></script>
	<!-- END PAGE VENDOR JS-->
	<script>
		var dataDisponibilidad = [];
		var dataClasificacion = { "sectores": [], "subsectores": [], "categorias": [], "subcategorias": [] };
		var fltorden = null;
		var fltordentipo = 1;
		var filtropermisos = document.querySelector("#fltpermisos");

		$(document).ready(function () {

			filtropermisos.style.display= "";
			showBrowser();

			//$('#fltbuscar').keypress(function (event){if (event.which == 13) { showBrowser(); } });	
		});
		function showEliminarFiltros() {

			
		$('#fltorden1').val(1);
		$('#fltestado1').val(0);
		$('#fltpertipo1').val("");
		$('#fltperclase1').val("");

		const inputs = document.querySelector('#fltnombre1');
		inputs.value='';
		var fltnombre = $('#fltnombre1').val();
			var orden = $('#fltorden1').val();
			var fltestado = $('#fltestado1').val();
			var fltpertipo = $('#fltpertipo1').val();
			var fltperclase = $('#fltperclase1').val();

			var data = {
				
				"fltnombre": fltnombre,
				"fltorden": fltorden,
				"fltordentipo": fltordentipo,
				"fltestado": fltestado,
				"fltpertipo": fltpertipo,
				"fltperclase": fltperclase
			};
			$('#DataBrowser').load('brw.php', data);


		}
		function changeidioma() {

			var en = $('#en').val();
			var es = $('#es').val();
			//console.log(en);
		}
		var arrayperfileslista = {arrayperfileslista};

		
		function loadClases1(obj) {//Se cargan las clases en relacion con el Tipo de Perfil
		var pertipo = $(obj).val();

		$.ajax({
			type: "POST",
			url: "getclases.php",
			data: { "pertipo": pertipo }
		}).done(function (rsp) {
			data = $.parseJSON(rsp);
			
			var clases = $('#fltperclase1');
			
			clases.empty();
			$("<option/>", {
				val: '',
				text: 'Seleccione...'
			}).appendTo(clases);
			
			$.each(data, function () {
				//console.log(this.perclase);
				//console.log(this.perclades);
				$("<option/>", {
					val: this.perclase,
					text: this.perclades
				}).appendTo(clases);
			});
			console.log(clases,data);
		});

	}
		function qrMaestro(reg) {
				var data = { "percodigo": reg };

				$('#DataMaestro').load('qrgenerador.php', data);
				$('#DataMaestro').css('display', '');
				$('#DataBrowser').css('display', 'none');
			}

		function showMaestro(reg) {
			filtropermisos.style.display= "none";
			var data = { "percodigo": reg };

			$(window).scrollTop(0);
			$('#DataMaestro').load('mst.php', data);
			$('#DataMaestro').css('display', '');
			$('#databrw1').css('display', 'none');
		}
		var pageNumero = 0;
		var runBuscarMas = false;
		function showBrowser() {
			$('.notification-sidebar-close').click();
			document.querySelector("#databrw1").innerHTML='';
			var newDiv = $('<div class="card-block" id="DataBrowser"></div>');
				newDiv.appendTo($('#databrw1'));
			 pageNumero = 0;
			runBuscarMas = false;
			
			var fltnombre = $('#fltnombre1').val();
			var orden = $('#fltorden1').val();
			var fltestado = $('#fltestado1').val();
			var fltpertipo = $('#fltpertipo1').val();
			var fltperclase = $('#fltperclase1').val();

			if (orden == fltorden) {
				if (fltordentipo == 2) {
					fltordentipo = 1; //Ascendente
				} else {
					fltordentipo = 1; //Descendente
				}

			} else {
				fltordentipo = 1; //Ascendente
			}
			fltorden = orden;

			var data = {
				
				"fltnombre": fltnombre,
				"fltorden": fltorden,
				"fltordentipo": fltordentipo,
				"fltestado": fltestado,
				"fltpertipo": fltpertipo,
				"fltperclase": fltperclase
			};
			console.log(data);
			$('#DataBrowser').load('brw.php', data);
			$('#DataMaestro').css('display', 'none');
			$('#DataBrowser').css('display', '');

		}

		function cerrarMaestro() {
			filtropermisos.style.display= "";
			$('#DataMaestro').css('display', 'none');
			$('#databrw1').css('display', '');
			if (window.location.href.includes("perfiles")){
				showBrowser();
			}else{
				window.location.reload();

			}
			
			
		}

		function viewFile(ext, url) {
			$('#viewfile').modal('show');
			if (ext == 'PNG' || ext == 'JPG') {
				$('#ifviewfileVideo').css('display', 'none');
				$('#ifviewfileImage').css('display', '');
				$('#ifviewfileImage').contents().find("body").css('margin-right', '0px');
				$('#ifviewfileImage').contents().find("body").css('margin-top', '0px');
				$('#ifviewfileImage').contents().find("body").css('margin-left', '0px');
				$('#ifviewfileImage').contents().find("body").css('margin-bottom', '0px');
				$('#ifviewfileImage').contents().find("body").html('<img style="width:100%; height:100%;" src="' + url + '">');
			} else if (ext == 'MP4') {
				$('#ifviewfileVideo').css('display', '');
				$('#ifviewfileImage').css('display', 'none');
				$('#ifviewfileVideo').attr('src', url);
			}
		}


		function KeyEnterBuscar(e) {

			if (!e) var e = window.event
			if (e.keyCode) code = e.keyCode;
			else if (e.which) code = e.which;
			if (code == 13) {
				showBrowser();
			}
		}

		function KeyEnterBuscarNuevo(e) {

		if (!e) var e = window.event
		if (e.keyCode) code = e.keyCode;
		else if (e.which) code = e.which;
		if (code == 13) {
			showBrowser();
		}
		}
		
		function browserVermas(){
			//console.log('ver mas:'+pageNumero);
			runBuscarMas=true;
			$('div[id="dvvermas"]').hide();
			
			pageNumero++;
			var fltnombre = $('#fltnombre1').val();
			var orden = $('#fltorden1').val();
			var fltestado = $('#fltestado1').val();
			var fltpertipo = $('#fltpertipo1').val();
			var fltperclase = $('#fltperclase1').val();
			fltordentipo = 1; //Ascendente
			
			fltorden = orden;

			var data = {
				"fltnombre": fltnombre,
				"fltorden": fltorden,
				"fltordentipo": fltordentipo,
				"fltestado": fltestado,
				"fltpertipo": fltpertipo,
				"fltperclase": fltperclase,
				"pageNumero": pageNumero
			};
			
			//console.log(data);
			if($('#DataMaestro').css('display')=='none'){
				var newDiv = $('<div class="card-block" id="DataBrowser'+pageNumero+'"></div>');
				newDiv.load('brw.php', data);
				newDiv.appendTo($('#databrw1'));
			}
			
		}
		$(window).scroll(function(){
			if(runBuscarMas==false){
				if($(window).scrollTop() + $(window).height() > $(document).height() - 100) {
					browserVermas();
				}
			}
		});
	</script>

</body>

</html>