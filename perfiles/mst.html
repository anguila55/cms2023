<style>
	.product__image {
		width: 60px; 
		height: 60px;
	}

	.product__title {
		font-size: 1rem;
	}

	@media (min-width: 576px) {
		.product__image {
			width: 80px; 
			height: 80px;
		}
		.product__title {
			font-size: 1.5rem;
		}
	}
</style>

<div id="horizontal-form-layouts">
	
			<div class="col-12 mt-3" style="text-align: right;">
				
					<img id="imgavatar" alt="" class="" src="{peravatar}"
						style="width: 80px; height: 80px;"  style="display: none">
				
				<form id="frmfileavatar" enctype="multipart/form-data">
					<input id="fileavatar" name="fileavatar" type="file" value="{peravatar}" accept=".png, .jpg, .jpeg"
						style="display:none;" onchange="readURLAvatar(this);" />
				</form>
			</div>

	<div class="p-3">
		<div class="col-md-12 col-sm-12 d-flex justify-content-center">
		<div>
			<button id="btnguardar" type="button" class="boton-new-rounded mb-1" style="width: 230px;" onclick="guardarMaestroMsg();">
				<i class="icon-note"></i> {Idioma_Guardar}
			</button>
			<a  id="btnguardar2" href="{linkeditarperfil}" target="_blank" type="button" class="boton-new-rounded mb-1" style="width: 290px;">{cambiar_contrasena}</a>
			<button id="btncancelar" type="button" class="boton-new-rounded-o mb-1 {ocultarcancelar}" style="width: 230px;" onclick="cerrarMaestro();">
				<i class="icon-arrow-left"></i> {atras}
			</button>
			<button id="btndisponib" type="button" class="boton-new-rounded-o mb-1" style="{btnviewdisp}; width: 230px;" onclick="viewDisponibilidad();"
				>
				<i class="fa fa-calendar"></i> {Idioma_Disponibilidad}
			</button>
			<button id="btnclasifven" type="button" class="boton-new-rounded-o mb-1 {linkintereses}" style="width: 230px;" onclick="viewClasificar('V');">
				<i class="fa fa-flickr"></i> {ampliada2}
			</button>
			<button id="btnclasifven" type="button" class="boton-new-rounded-o mb-1 {linkoferta}" style="width: 230px;" onclick="viewClasificar('V');">
				<i class="fa fa-flickr"></i> {Idioma_ClasificarVentas}
			</button>
			<button id="btnclasifven" type="button" class="boton-new-rounded-o mb-1 {linkdemanda}" style="width: 230px;" onclick="viewClasificar('C');">
				<i class="fa fa-flickr"></i> {Idioma_ClasificarCompras}
			</button>
			

			<button id="btnclasifcom " type="button" class="boton-new-rounded mb-1 {display-sponsor}" style="width: 230px;"
									onclick="showSponsor({sponsorcod});">
				<i class="fa fa-bullhorn mr-1"></i>{sponsors2}
			</button>
			<button type="button" class="boton-new-rounded-o mb-1" style="width: 230px;"
			onclick="showView({percodigo});">
				<i class="icon-magnifier-add mr-1"></i>Previsualizar
			</button>
		</div>
		</div>
		<form class="form form-horizontal">
			<div class="form-body">
				<h4 class="form-section"><i class="icon-user"></i>{Idioma_MSTDatosPersonales}</h4>

				<div class="form-group row {mostrarnombre}">
					<label class="col-md-3 label-control" for="pernombre">{textopernombre}
						<i>({percodigo})</i>: </label>
					<div class="col-md-9">
						<input type="hidden" id="percodigo" name="percodigo" value="{percodigo}">
						<input type="hidden" id="estcodigo" name="estcodigo" value="{estcodigo}">
						<input type="text" id="pernombre" name="pernombre" class="form-control"
							value="{pernombre}">
					</div>
				</div>
				<div class="form-group row {mostrarapellido}">
					<label class="col-md-3 label-control" for="perapelli">{textoperapelli}: </label>
					<div class="col-md-9">
						<input type="text" id="perapelli" name="perapelli" class="form-control"
							value="{perapelli}">
					</div>
				</div>

					<div class="form-group row {mostrarid} ">
					<label class="col-md-3 label-control" for="percpf">{textopercpf}: </label>
					<div class="col-md-9">
						<input type="text" id="percpf" name="percpf" class="form-control" value="{percpf}">
					</div>
				</div>

				<div class="form-group row {mostrarempresa}">
					<label class="col-md-3 label-control" for="percompan">{textopercompan}: </label>
					<div class="col-md-9">
						<input type="text" id="percompan" name="percompan" class="form-control"
							value="{percompan}">
					</div>
				</div>

				<div class="form-group row {mostrarcargo}">
					<label class="col-md-3 label-control" for="percompan">{textopercargo}: </label>
					<div class="col-md-9">
						<input type="text" id="percargo" name="percargo" class="form-control"
							value="{percargo}">
					</div>
				</div>

				<div class="form-group row {mostraridioma}">
					<label class="col-md-3 label-control" for="peridioma">{Idioma_Idioma}: </label>
					<div class="col-md-9">
						<select id="peridioma" name="peridioma" class="form-control">
							<option value="" selected>{Idioma_Seleccione}...</option>
							<!-- BEGIN idiomas -->
							<option value="{idicodigo}" {idiselected}>{ididescri}</option>
							<!-- END idiomas -->
						</select>
					</div>
				</div>
				<div class="form-group row rubro" style="{rubro}">
					<label class="col-md-3 label-control" for="perrubcod">{Idioma_Rubros}: </label>
					<div class="col-md-9">
						<select id="perrubcod" name="perrubcod" class="form-control" disabled>
							<option value="0" selected>{Idioma_Seleccione}...</option>
							<!-- BEGIN rubros -->
							<option value="{rubcod}" {rubsel}>{perrubdes}</option>
							<!-- END rubros -->

						</select>
					</div>
				</div>

				<div class="form-group row miIndustria {mostrarindustria}" >
					<label class="col-md-3 label-control" for="perarecod">{textoperarecod}: </label>
					<div class="col-md-9">
						<select id="perarecod" name="perarecod" class="form-control">
							<option value="" selected>{Idioma_Seleccione}...</option>
							<!-- BEGIN area -->
							<option value="{perareacod}" {areasel}>{peraredes}</option>
							<!-- END area -->

						</select>
					</div>
				</div>


				<div class="form-group row tipoPerfil" style="{tipoPerfil}">
					<label class="col-md-3 label-control" for="pertipo">{textopertipo}: </label>
					<div class="col-md-9">
						<select id="pertipo" name="pertipo" class="form-control" {cmbpertipo}
							onchange="loadClases(this);">
							<option value="0">{Idioma_Seleccione}...</option>
							<!-- BEGIN pertipos -->
							<option value="{pertipcod}" {pertipsel}>{pertipdes}</option>
							<!-- END pertipos -->
						</select>
					</div>
				</div>

				<div class="form-group row clasePerfil" style="{clasePerfil}">
					<label class="col-md-3 label-control" for="perclase">{textoperclase}: </label>
					<div class="col-md-9">
						<select id="perclase" name="perclase" class="form-control" {cmbperclase}>
							<option value="" selected>{Idioma_Seleccione}...</option>
							<!-- BEGIN perclases -->
							<option value="{perclacod}" {perclasel}>{perclades}</option>
							<!-- END perclases -->
						</select>
					</div>
				</div>

				<div class="form-group row {mostrarzonahoraria}">
					<label class="col-md-3 label-control" for="paicodigo">{textopaicodigo}: </label>
					<div class="col-md-9">
						<select id="timezone" name="timezone" class="form-control">
							<option value="" selected>{Idioma_Seleccione}...</option>
							<!-- BEGIN zonahoraria -->
							<option value="{timregcod}" {timsel}>{timdescri}</option>
							<!-- END zonahoraria -->
						</select>
					</div>
				</div>


				<div class="form-group row sala {sala} {mostrarqr} d-none">
					<label class="col-md-3 label-control" for="mescodigo">{mesasnombre}</label>
					<div class="col-md-9">
						<select id="mescodigo" name="mescodigo" class="form-control" {cmbmesa}>
							<option value="0" selected>{Idioma_Seleccione}...</option>
							<!-- BEGIN mesclases -->
							<option value="{mesclacod}" {mesclasel}>{mesnumero}</option>
							<!-- END mesclases -->
						</select>
					</div>
				</div>

				<div class="form-group row {mostrarqr}" >
					<label class="col-md-3 label-control" for="tipo">{textotipo}: </label>
					<div class="col-md-9">
						<select id="tipo" name="tipo" class="form-control">
							<option value="0" {tipo0}>{tipodeparticipacion1}</option>
							<option value="1" {tipo1}>{tipodeparticipacion2}</option>
							<option value="2" {tipo2}>{tipodeparticipacion3}</option>
						</select>
					</div>
				</div>

				<div class="form-group row" style="{linkaurl}">
					<label class="col-md-3 label-control" for="perreuurl">{Idioma_ReuUrl}: </label>
					<div class="col-md-9">
						<input type="text" id="perreuurl" name="perreuurl" class="form-control"
							value="{perreuurl}" maxlength="2000">
					</div>
				</div>

				<div class="form-group row descripcionEmpresa {mostrardesemp}">
					<label class="col-md-3 label-control" for="percompan">{textoperempdes}:
					</label>
					<div class="col-md-9">
						<textarea class="form-control" id="perempdes" name="perempdes" rows="3"
							maxlength="5000">{perempdes}</textarea>
					</div>
				</div>

				<div class="form-group row comentarioRegistro" style="{viewpercoment}">
					<label class="col-md-3 label-control" for="percompan">{textopercoment}:
					</label>
					<div class="col-md-9">
						<textarea class="form-control" id="percoment" name="percoment" rows="3"
							maxlength="5000" readonly>{percoment}</textarea>
					</div>
				</div>

				<h4 class="form-section {peradminstyle2}"><i class="icon-book-open"></i>Preguntas Adicionales</h4>

				<!-- BEGIN preguntasadicionales -->
				<div class="form-group row {peradminstyle2}">
					<label class="col-md-3 label-control" for="perdirecc">{preguntaadicional}: </label>
					<div class="col-md-9">
						<input type="text"  class="form-control" disabled
							value="{respuestaadicional}">
					</div>
				</div>
				<!-- END preguntasadicionales -->

				<h4 class="form-section"><i class="icon-book-open"></i>{Idioma_Contacto}</h4>

				<div class="form-group row {mostrarcorreo}">
					<label class="col-md-3 label-control" for="percorreo">{Idioma_Correo}: </label>
					<div class="col-md-9">
						<input type="text" id="percorreo" name="percorreo" class="form-control"
							value="{percorreo}">
					</div>
				</div>

				<div class="form-group row {mostrartelefono}">
					<label class="col-md-3 label-control" for="percorreo">{textopertelefo}: </label>
					<div class="col-md-9">
						<input type="text" id="pertelefo" name="pertelefo" class="form-control"
							value="{pertelefo}">
					</div>
				</div>

				<div class="form-group row {mostrarweb} " >
					<label class="col-md-3 label-control" for="percorreo">{textoperurlweb}: </label>
					<div class="col-md-9">
						<input type="text" id="perurlweb" name="perurlweb" placeholder="https://www.web.com/" class="form-control"
							value="{perurlweb}">
					</div>
				</div>

				<div class="form-group row {mostrarlinkedin}">
					<label class="col-md-3 label-control" for="percorreo">{textoperlinked}: </label>
					<div class="col-md-9">
						<input type="text" id="perlinked" name="perlinked" placeholder="https://www.linkedin.com/user" class="form-control"
							value="{perlinked}">
					</div>
				</div>


				<!-- ANCHOR REDES SOCIALES -->
				<!-- SECTION  FACEBOOK -->
				<div class="form-group row {mostrarfacebook}" >
					<label class="col-md-3 label-control" for="percorreo">{textoperfac}: </label>
					<div class="col-md-9">
						<input type="text" id="perfac" name="perfac" class="form-control" placeholder="https://www.facebook.com/user"
							value="{perfac}">
					</div>
				</div>

				<!-- SECTION TWITTER -->
				<div class="form-group row {mostrartwitter}" >
					<label class="col-md-3 label-control" for="percorreo">{textopertwi}: </label>
					<div class="col-md-9">
						<input type="text" id="pertwi" name="pertwi" placeholder="https://www.twitter.com/user" class="form-control"
							value="{pertwi}">
					</div>
				</div>
				<!-- SECTION  INSTAGRAM -->
				<div class="form-group row {mostrarinstagram}" >
					<label class="col-md-3 label-control" for="percorreo">{textoperins}: </label>
					<div class="col-md-9">
						<input type="text" id="perins" name="perins" placeholder="https://www.instagram.com/user" class="form-control"
							value="{perins}">
					</div>
				</div>



				<!--END  ANCHOR  REDES SOCIALES -->

				<h4 class="form-section"><i class="icon-book-open"></i>{Idioma_Domicilio}</h4>

				<div class="form-group row {mostrardireccion}">
					<label class="col-md-3 label-control" for="perdirecc">{textoperdirecc}: </label>
					<div class="col-md-9">
						<input type="text" id="perdirecc" name="perdirecc" class="form-control"
							value="{perdirecc}">
					</div>
				</div>

				<div class="form-group row {mostrarciudad}">
					<label class="col-md-3 label-control" for="perciudad">{textoperciudad}: </label>
					<div class="col-md-9">
						<input type="text" id="perciudad" name="perciudad" class="form-control"
							value="{perciudad}">
					</div>
				</div>

				<div class="form-group row {mostrarestado}">
					<label class="col-md-3 label-control" for="perestado">{textoperestado}: </label>
					<div class="col-md-9">
						<input type="text" id="perestado" name="perestado" class="form-control"
							value="{perestado}">
					</div>
				</div>

				<div class="form-group row {mostrarcodigopostal}">
					<label class="col-md-3 label-control" for="perestado">{textopercodpos}: </label>
					<div class="col-md-9">
						<input type="text" id="percodpos" name="percodpos" class="form-control"
							value="{percodpos}">
					</div>
				</div>

				<div class="form-group row {mostrarpais}">
					<label class="col-md-3 label-control" for="paicodigo2">{textopaicodigo2}: </label>
					<div class="col-md-9">
						<select id="paicodigo" name="paicodigo" class="form-control">
							<option value="">{Idioma_Pais}...</option>
							<!-- BEGIN paises -->
							<option value="{paicodigo}" {paiselected}>{paidescri}</option>
							<!-- END paises -->
						</select>
					</div>
				</div>


				<h4 class="form-section"><i class="icon-book-open"></i>{Idioma_DatosDeAc}</h4>

				<div class="form-group row ">
					<label class="col-md-3 label-control" for="perdirecc">{textoperusuacc}: </label>
					<div class="col-md-9">
						<input type="text" id="perusuacc" name="perusuacc" class="form-control"
							value="{perusuacc}">
					</div>
				</div>

				<div class="form-group row">
					<label class="col-md-3 label-control" for="perdirecc">{textoperpasacc}: </label>
					<div class="col-md-9">
						<input type="hidden" id="perpasaccant" name="perpasaccant" value="{perpasacc}">
						<input type="password" id="perpasacc" name="perpasacc" class="form-control"
							value="{perpasacc}">
					</div>
				</div>

				<div class="form-group row" style="{peradminstyle}">
					<label class="col-md-3 label-control" for="peradmin">{tiposdepermiso}: </label>
					<div class="col-md-9">
						<select id="peradmin" name="peradmin" class="form-control">
							<option value="0" {peradminsel_0}>Basic</option>
							<option value="1" {peradminsel_1}>Administrator</option>
						</select>
					</div>
				</div>
				<!--<div class="form-group row">
					<label class="col-md-3 label-control" for="perdirecc">Codigo Eventia: </label>
					<div class="col-md-9">
						<input type="hidden" id="perpasaccant" name="perpasaccant" value="{perpasacc}">
						<input type="text" id="percodeve" name="perpasacc" class="form-control"
							value="{percodeve}">
					</div>
				</div>-->
				<h4 id="proddestitle" class="form-section" style="{viewproddestacados}"><i
						class="icon-book-open"></i>{destacados}</h4>
				<div class="row pl-2 pr-2 mt-1 mb-1">
					<p class="col-12 fw-600 mb-0">{descripcionproductos}</p>
				</div>
				<div id="proddesdetalle" style="{viewproddestacados}">
					<!-- BEGIN productos -->
					<div class="media">
						<a>
							<img id="imgproducto{perproitm}" alt="" class="media-object product__image d-flex mr-3"
								src="{perprofil}"
								onclick="findProductoImagen({perproitm});">
						</a>
						<div class="media-body">
							<h4 class="media-heading product__title">{proddestacados} {perproitm}:</h4>
							<p><input type="text" id="perpronom{perproitm}" name="perpronom"
									class="form-control" placeholder="{placeholderproductos}" value="{perpronom}" {perpronomreadonly}
									maxlength=200></p>
							<form id="frmfile{perproitm}" enctype="multipart/form-data">
								<input id="fileprod{perproitm}" name="fileprod{perproitm}" type="file"
									value="{perprofil}" accept=".png, .jpg, .jpeg" style="display:none;"
									onchange="readURL(this,{perproitm});" />
							</form>
						</div>
					</div>
					<!-- END productos -->
				</div>

				<!--
				<div class="form-group row">
					<label class="col-md-3 label-control" for="perobserv">Observaci√≥n: </label>
					<div class="col-md-9">
						<textarea id="perobserv" name="perobserv" rows="5" class="form-control"></textarea>
					</div>
				</div>
				-->
			</div>
		</form>
		<div class="col-md-12 mt-2 d-flex justify-content-center">
			<div>
				<button id="btnguardar" type="button" class="boton-new-rounded mb-1" style="width: 230px;" onclick="guardarMaestroMsg();">
					<i class="icon-note"></i> {Idioma_Guardar}
				</button>
				<a  id="btnguardar2" href="{linkeditarperfil}" target="_blank" type="button" class="boton-new-rounded mb-1" style="width: 290px;">{cambiar_contrasena}</a>
				<button id="btncancelar" type="button" class="boton-new-rounded-o mb-1 {ocultarcancelar}" style="width: 230px;" onclick="cerrarMaestro();">
					<i class="icon-arrow-left"></i> {atras}
				</button>
				<button id="btndisponib" type="button" class="boton-new-rounded-o mb-1" style="{btnviewdisp}; width: 230px;" onclick="viewDisponibilidad();"
					>
					<i class="fa fa-calendar"></i> {Idioma_Disponibilidad}
				</button>
				<button id="btnclasifven" type="button" class="boton-new-rounded-o mb-1 {linkintereses}" style="width: 230px;" onclick="viewClasificar('V');">
					<i class="fa fa-flickr"></i> {ampliada2}
				</button>
				<button id="btnclasifven" type="button" class="boton-new-rounded-o mb-1 {linkoferta}" style="width: 230px;" onclick="viewClasificar('V');">
					<i class="fa fa-flickr"></i> {Idioma_ClasificarVentas}
				</button>
				<button id="btnclasifven" type="button" class="boton-new-rounded-o mb-1 {linkdemanda}" style="width: 230px;" onclick="viewClasificar('C');">
					<i class="fa fa-flickr"></i> {Idioma_ClasificarCompras}
				</button>
				
	
				<button id="btnclasifcom " type="button" class="boton-new-rounded mb-1 {display-sponsor}" style="width: 230px;"
										onclick="showSponsor({sponsorcod});">
					<i class="fa fa-bullhorn mr-1"></i>{sponsors2}
				</button>
				<button type="button" class="boton-new-rounded-o mb-1" style="width: 230px;"
				onclick="showView({percodigo});">
					<i class="icon-magnifier-add mr-1"></i>Previsualizar
				</button>
			</div>
			</div>
	</div>
</div>

<script>
	//$(document).ready(() => {
	//
	//	checkPertipo()
	//})
	//
	//function checkPertipo() {
	//
	//
	//	let pertipo = $('#pertipo').val();
	//
	//
	//	if (pertipo != 1) {
	//
	//		$('.descripcionEmpresa').hide();
	//		$('.rubro').hide();
	//		$('.miIndustria').hide();
	//		$('.tipoPerfil').hide();
	//		$('.clasePerfil').hide();
	//		$('.sala').hide();
	//		$('.comentarioRegistro').hide();
	//
	//	}
	//
	//
	//
	//}

	

	dataDisponibilidad = [{dataDisp}];
	auxdataDisponibilidad = [];
	dataClasificarVen	= {	"sectores":[{dataSectoresVen}],
							"subsectores":[{dataSubsectoresVen}],
							"categorias":[{dataCategoriasVen}],
							"subcategorias":[{dataSubcategoriasVen}] };
							
	dataClasificarCom	= {	"sectores":[{dataSectoresCom}],
							"subsectores":[{dataSubsectoresCom}],
							"categorias":[{dataCategoriasCom}],
							"subcategorias":[{dataSubcategoriasCom}] };

	loadMaestro();

	//Acceso directo a clasificar
	if ('{fltviewproductos}' == 'C') {
		viewClasificar('C');
	}else if ('{fltviewproductos}' == 'V') {

		viewClasificar('V');
	}

	$('#pertipo').change(function () {
		if (this.value != 1) {
			$('#proddestitle').css('display', 'none');
			$('#proddesdetalle').css('display', 'none');
		} else {
			$('#proddestitle').css('display', '');
			$('#proddesdetalle').css('display', '');
		}
	});

	function readURL(input, itm) {
		if (input.files && input.files[0]) {
			var reader = new FileReader();
			var fname = null;

			reader.onload = function (e) {
				$('#imgproducto' + itm).attr('src', e.target.result);
				$('#perpronom' + itm).val('');
				$('#perpronom' + itm).attr('readonly', false);

				var image = new Image();
				image.src = e.target.result;
				image.onload = function () {
					//var height = 100;
					//var w = $('#imgview')[0].naturalWidth;
					//var h = $('#imgview')[0].naturalHeight;
					//var newWidth = height * w / h;
					//$('#imgview').css('width',newWidth);
					//$('#imgview').css('height',height);
				};
			}

			reader.readAsDataURL(input.files[0]);
			//$('#uploadfile').hide();
			//$('#mnuimgurl').val(input.files[0].name);
		}
	}

	function findAvatar() {
		$('#imgavatar').attr('src', '{imgAvatarNull}');
		$('#fileavatar').click();
	}

	function readURLAvatar(input) {
		if (input.files && input.files[0]) {
			var reader = new FileReader();
			var fname = null;

			reader.onload = function (e) {
				$('#imgavatar').attr('src', e.target.result);

				var image = new Image();
				image.src = e.target.result;
				image.onload = function () {
					//var height = 100;
					//var w = $('#imgview')[0].naturalWidth;
					//var h = $('#imgview')[0].naturalHeight;
					//var newWidth = height * w / h;
					//$('#imgview').css('width',newWidth);
					//$('#imgview').css('height',height);
				};
			}

			reader.readAsDataURL(input.files[0]);
			//$('#uploadfile').hide();
			//$('#mnuimgurl').val(input.files[0].name);
		}
	}

	function findProductoImagen(itm) {
		$('#perpronom' + itm).val('');
		$('#perpronom' + itm).attr('readonly', true);
		$('#imgproducto' + itm).attr('src', '{imgProductoNull}');
		$('#fileprod' + itm).val();
		$('#fileprod' + itm).click();
	}

	function loadMaestro() {
		var percodigo = $('#percodigo').val();
		var data = {
			"percodigo": percodigo,
			"dataDisponibilidad": dataDisponibilidad
		};
		$('#DataDisp').load('disponibilidad.php', data);
	}
	

	function guardarMaestroMsg() {
		var errcod = 0;
		var errmsg = '';
		var percodigo = $('#percodigo').val();
		var percorreo = $('#percorreo').val();
		var pernombre = $('#pernombre').val();
		var perapelli = $('#perapelli').val();
		var percompan = $('#percompan').val();
		var paicodigo = $('#paicodigo').val();
		var timezone = $('#timezone').val();
		var peridioma = $('#peridioma').val();
		var perarecod = $('#perarecod').val();

		//var perindcod = $('#perindcod').val();


		
		if (peridioma == '') {
			errcod = 2;
			errmsg = '{Idioma_SelecIdiom}';
		}
		if (percorreo == '') {
			errcod = 2;
			errmsg = '{Idioma_FltCorreo}';
		}
		if (pernombre == '') {
			errcod = 2;
			errmsg = '{Idioma_Fltnom}';
		}
		if (perapelli == '') {
			errcod = 2;
			errmsg = '{Idioma_FltApe}';
		}
		if (percompan == '') {
			errcod = 2;
			errmsg = '{Idioma_FltComp}';
		}
		if (paicodigo == '') {
			errcod = 2;
			errmsg = '{Idioma_FltPai}';
		}
		if (timezone == '') {
			errcod = 2;
			errmsg = '{Idioma_FltZh}';
		}
		
		

		if (errcod != 0) {
			//swal("GUARDAR", errmsg, "error").done();
			toastr.error(errmsg, '{Idioma_GuardarSwal}');
		}


		if (errcod == 0) {
			swal({
				title: "{Idioma_GuardarSwal}",
				text: "{Idioma_Confirmar}",
				type: 'question',
				showCancelButton: true,
				confirmButtonColor: '#0CC27E',
				cancelButtonColor: '#FF586B',
				confirmButtonText: '{Idioma_BotonConf}',
				cancelButtonText: '{Idioma_BotonCan}',
				confirmButtonClass: 'btn btn-success btn-raised mr-5',
				cancelButtonClass: 'btn btn-danger btn-raised',
				buttonsStyling: false
			}).then(function () {
				guardarMaestro();
			}, function (dismiss) {
				// dismiss can be 'overlay', 'cancel', 'close', 'esc', 'timer'
				if (dismiss === 'cancel') {
				}
			}).done();
		}
	}

	function guardarMaestro() {
		var formData = new FormData($('#FrmMst')[0]);
		formData.append("percodigo", $('#percodigo').val());
		formData.append("estcodigo", $('#estcodigo').val());
		formData.append("pernombre", $('#pernombre').val());
		formData.append("perapelli", $('#perapelli').val());
		formData.append("percompan", $('#percompan').val());
		formData.append("perrubcod", $('#perrubcod').val());
		formData.append("percorreo", $('#percorreo').val());
		formData.append("perciudad", $('#perciudad').val());
		formData.append("perestado", $('#perestado').val());
		formData.append("percodpos", $('#percodpos').val());
		formData.append("pertelefo", $('#pertelefo').val());
		formData.append("perurlweb", $('#perurlweb').val());
		formData.append("perusuacc", $('#perusuacc').val());
		formData.append("perpasacc", $('#perpasacc').val());
		formData.append("perpasaccant", $('#perpasaccant').val());
		formData.append("perdirecc", $('#perdirecc').val());
		formData.append("percargo", $('#percargo').val());
		formData.append("pertipo", $('#pertipo').val());
		formData.append("perclase", $('#perclase').val());
		formData.append("perempdes", $('#perempdes').val());
		formData.append("peradmin", $('#peradmin').val());
		formData.append("mescodigo", $('#mescodigo').val());
		formData.append("tipo", $('#tipo').val());
		formData.append("peridioma", $('#peridioma').val());
		formData.append("paicodigo", $('#paicodigo').val());
		formData.append("timezone", $('#timezone').val());
		formData.append("perreuurl", $('#perreuurl').val());
		//formData.append("perindcod"     , $('#perindcod').val());
		formData.append("perarecod", $('#perarecod').val());
		formData.append("percpf"	 ,$('#percpf').val());
		formData.append("perfac", $('#perfac').val());
		formData.append("pertwi", $('#pertwi').val());
		formData.append("perins", $('#perins').val());
		formData.append("perlinked", $('#perlinked').val());
		formData.append("percodeve", $('#percodeve').val());
		formData.append("dataClasificarVen"	, JSON.stringify(dataClasificarVen)	 );
		formData.append("dataClasificarCom"	, JSON.stringify(dataClasificarCom)	 );


		if (typeof ($('#fileavatar')[0].files[0]) !== "undefined") {
			formData.append('fileavatar', $('#fileavatar')[0].files[0]);
		}

		var itm = 0;
		$.each($('input[id^="fileprod"][type="file"]'), function () {
			itm++;
			//console.log(itm);
			if (typeof ($(this)[0].files[0]) !== "undefined") {
				formData.append('file' + itm, $(this)[0].files[0]);
			}
		});

		var itm = 0;
		$.each($('input[id^="perpronom"]'), function () {
			itm++;
			if ($('#perpronom' + itm).val().trim() != '') {
				formData.append("perpronom" + itm, $('#perpronom' + itm).val());
			}
		});


		$.ajax({
			type: "POST",
			url: "grb.php",
			dataType: "html",
			data: formData,
			cache: false,
			contentType: false,
			processData: false
		}).done(function (rsp) {
			
			data = $.parseJSON(rsp);

			if (data.errcod == 0) {
				toastr.success(data.errmsg, 'SAVE');
				//swal("GUARDAR", data.errmsg, "success").done();
				//Elimino de la url el parametro de Produtos si existe
				//
				/*var ref='';
				ref=window.location.href.replace('?P=C', '');
				ref=ref.replace('?P=V', '');
				window.location = ref.replace('?P', '');*/
				cerrarMaestro();
			} else {
				toastr.error(data.errmsg, 'SAVE');
				//swal("GUARDAR", data.errmsg, "error").done();
			}

		});
	}

	function viewDisponibilidad() {
		//Busco la disponibilidad
		
		var percodigo = $('#percodigo').val();
		var data = {
			"percodigo": percodigo,
			"dataDisponibilidad": dataDisponibilidad
		};

		$('#DataDisp').load('disponibilidad.php', data);
		$('#DataMaestroDisp').modal('show');
	}

	function viewClasificar(vencom){
		var percodigo 	= $('#percodigo').val();
		var pervencom 	= vencom;
		var dataClasif = null;
		
		if(vencom=='V'){
			dataClasif = dataClasificarVen;
		}else{
			dataClasif = dataClasificarCom;
		}
		var data = {"percodigo":percodigo,
					"pervencom":vencom,
					"dataClasificar":dataClasif};
		
		$('#DataClasif').load('clasificar.php',data);
		$('#DataMaestroClasif').modal('show');
	}

	function loadClases(obj) {//Se cargan las clases en relacion con el Tipo de Perfil
		var pertipo = $(obj).val();

		$.ajax({
			type: "POST",
			url: "getclases.php",
			data: { "pertipo": pertipo }
		}).done(function (rsp) {
			data = $.parseJSON(rsp);

			var clases = $('#perclase');
			clases.empty();
			$("<option/>", {
				val: '',
				text: 'Seleccione...'
			}).appendTo(clases);

			$.each(data, function () {
				//console.log(this.perclase);
				//console.log(this.perclades);
				$("<option/>", {
					val: this.perclase,
					text: this.perclades
				}).appendTo(clases);
			});
		});

	}
</script>