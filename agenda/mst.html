
<section id="horizontal-form-layouts">
	<div class="row">
		<div class="col-sm-12">
			<h2 class="content-header">Programa</h2>
		</div>
	</div>
	

	<!--New formulario-->
	<div class="col-md-12">
		<div class="card">
			<div class="card-body">
				<div class="px-3">
					<form class="form">
						<div class="form-body">

							<div class="form-group">
								<label for="timesheetinput1">{titulo} (hasta 600 caracteres)</label>
								<div class="position-relative has-icon-left">
									<input type="hidden" id="agereg" name="agereg" value="{agereg}">
									<input type="text" id="agetitulo"  name="agetitulo" class="form-control" value="{agetitulo}">
									<div class="form-control-position">
										<!--En caso que requiera icono-->
									</div>
								</div>
							</div>
							<div class="form-group">
								<label for="timesheetinput1">Título Ingles (hasta 600 caracteres)</label>
								<div class="position-relative has-icon-left">
									<input type="hidden" id="agereg" name="agereg" value="{agereg}">
									<input type="text" id="agetituloing"  name="agetituloing" class="form-control" value="{agetituloing}">
									<div class="form-control-position">
										<!--En caso que requiera icono-->
									</div>
								</div>
							</div>
							<div class="form-group">
								<label for="timesheetinput2">{Idioma_Descripcion} (hasta 700 caracteres)</label>
								<div class="position-relative has-icon-left">
									<textarea class="form-control" rows="4" id="agedescri"  name="agedescri" class="form-control" value="{agedescri}" maxlength="3000"> {agedescri} </textarea>
									<div class="form-control-position">
										<!--En caso que requiera icono-->
									</div>
								</div>
							</div>
							<div class="form-group">
								<label for="timesheetinput2">{Idioma_Descripcion} Ingles (hasta 700 caracteres)</label>
								<div class="position-relative has-icon-left">
									<textarea class="form-control" rows="4" id="agedescriing"  name="agedescriing" class="form-control" value="{agedescriing}" maxlength="3000"> {agedescriing} </textarea>
									<div class="form-control-position">
										<!--En caso que requiera icono-->
									</div>
								</div>
							</div>

							<div class="form-group">
								<label for="timesheetinput2">{lugar}</label>
								<div class="position-relative has-icon-left">
									<select id="agelugar" name="agelugar" class="form-control" >
										<option value="0">Select...</option>
										<!-- BEGIN salas -->
										<option value="{salades}" {salasel}>{salades}</option>
										<!-- END salas -->
									</select>
							

									</select>
									<!--<input type="text" id="agelugar" class="form-control" name="agelugar" value="{agelugar}">-->
									<div class="form-control-position">
										<!--En caso que requiera icono-->
									</div>
								</div>
							</div>
							
							<div class="form-group ">
								<label >{Idioma_Speakers1}: </label>
								
									<select multiple id="spkreg" name="spkreg" class="form-control" >
										<option value="" >{Idioma_Seleccione}...</option>
										<!-- BEGIN speakers -->
											<option value="{spkreg}" {spkselect}>{spktitulo}
											</option>
										<!-- END speakers -->
									</select>
							</div>

							<!-- <div class="form-group">
								NUEVO CAMPO
							</div> -->

							<div class="form-group">
								<label for="timesheetinput3">{Idioma_Dia}</label>
								<div class="position-relative has-icon-left">
									<input type="date" id="agefch" class="form-control" name="agefch" value="{agefch}">
									<div class="form-control-position">
										<i class="ft-message-square"></i>
									</div>
								</div>
							</div>


							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<label for="timesheetinput5">{horainicio}</label>
										<div class="position-relative has-icon-left">
											<input type="time" id="agehorini" class="form-control" name="agehorini" value="{agehorini}">
											<div class="form-control-position">
												<i class="ft-clock"></i>
											</div>
										</div>
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<label for="timesheetinput6">{horafin}</label>
										<div class="position-relative has-icon-left">
											<input type="time" id="agehorfin" class="form-control" name="agehorfin" value="{agehorfin}">
											<div class="form-control-position">
												<i class="ft-clock"></i>
											</div>
										</div>
									</div>
								</div>
							</div>

								<div class="form-group d-none">
									<label for="timesheetinput2">{preguntas}</label>
									<div class="position-relative has-icon-left">
										<select id="ageprehab" name="ageprehab" class="form-control" >
											<option value="S" {ageprehabS}>{preguntaspermitir}</option>
											<option value="N" {ageprehabN}>{preguntasnopermitir}</option>
										</select>
									</div>
								</div>
								
							<div class="form-group">
								<label for="timesheetinput1">Link de señal de idioma ESP</label>
								<div class="position-relative has-icon-left">
									<input type="text" id="ageyoulnk"  name="ageyoulnk" class="form-control" value="{ageyoulnk}">
								</div>
							</div>

							<div class="form-group">
								<label for="timesheetinput1">Link de señal de idioma ING</label>
								<div class="position-relative has-icon-left">
									<input type="text" id="ageyoulnking"  name="ageyoulnking" class="form-control" value="{ageyoulnking}">
								</div>
							</div>

							<div class="form-group">
								<label for="timesheetinput1">Link de señal del idioma POR</label>
								<div class="position-relative has-icon-left">
									<input type="text" id="ageyoulnkpor"  name="ageyoulnkpor" class="form-control" value="{ageyoulnkpor}">
								</div>
							</div>
						
						</div>

						<div class="form-actions right">
								<button id="btnguardar" type="button" class="btn btn-success" onclick="guardarMaestroMsg();">
									<i class="icon-note"></i> {Idioma_Guardar}
								</button>
								<button id="btncancelar" type="button" class="btn btn-danger mr-1" onclick="showBrowser();">
									<i class="icon-trash"></i> {Idioma_BotonCan}
								</button>
								&nbsp;&nbsp;
							</div>
					</form>

				</div>
			</div>
		</div>
	</div>
	
</section>

<script>

//options salas

/////////////////

	$('#spkreg').multiselect({
			columns: 1,
			placeholder: 'Seleccione speakers',
			search: true,
			selectAll: true
		});

	

	function guardarMaestroMsg(){
		
		var errcod = 0;
		var errmsg = '';
		//var avireg = $('#avireg').val();
		//var avititulo = $('#avititulo').val();
		//var aviurl = $('#aviurl'). val();
		//var aviimagen = $('#aviimagen').val();
			
		if(errcod==0){
			swal({
				title:"SAVE",
				text: "¿Confirma guardar los cambios / Are sure?",
				type: 'question',
				showCancelButton: true,
				confirmButtonColor: '#0CC27E',
				cancelButtonColor: '#FF586B',
				confirmButtonText: 'Confirmar',
				cancelButtonText: 'Cancelar',
				confirmButtonClass: 'btn btn-success btn-raised mr-5',
				cancelButtonClass: 'btn btn-danger btn-raised',
				buttonsStyling: false
			}).then(function () {
				guardarMaestro();
				
			}, function (dismiss) {
				// dismiss can be 'overlay', 'cancel', 'close', 'esc', 'timer'
				if (dismiss === 'cancel') {
				}
			}).done();
		}
	}

	function guardarMaestro(){
		var agereg 		= $('#agereg').val();
		var agetitulo 	= $('#agetitulo').val();
		var agedescri 	= $('#agedescri').val();
		var agetituloing 	= $('#agetituloing').val();
		var agedescriing 	= $('#agedescriing').val();
		var agelugar 	= $('#agelugar').val();
		var agefch 		= $('#agefch').val();
		var agehorini 	= $('#agehorini').val();
		var agehorfin 	= $('#agehorfin').val();
		var estcodigo	= $('#estcodigo').val();
		var spkreg     	= $('#spkreg').val();
		var ageprehab   = $('#ageprehab').val();
		var ageyoulnk   = $('#ageyoulnk').val();
		var ageyoulnking   = $('#ageyoulnking').val();
		var ageyoulnkpor   = $('#ageyoulnkpor').val();
		
		let speakers=''
		$.each(spkreg,function(i,val){ 
			speakers+= val+','; 
			
		});
		speakers += '0';
			
		
		var data = {"agereg":agereg,
					"agetitulo":agetitulo,
					"agedescri":agedescri,
					"agetituloing":agetituloing,
					"agedescriing":agedescriing,
					"agelugar":agelugar,
					"agefch":agefch,
					"agehorini":agehorini,
					"agehorfin":agehorfin,
					"estcodigo":estcodigo,
					"speakers":speakers,
					"ageprehab":ageprehab,
					"ageyoulnk":ageyoulnk,
					"ageyoulnking":ageyoulnking,
					"ageyoulnkpor":ageyoulnkpor
					};
		
		$.ajax({
		  type: "POST",
		  url: 'grb.php',
		  data: data
		}).done(function( rsp ) {
			data = $.parseJSON(rsp);
			
			if(data.errcod == 0){
				toastr.success(data.errmsg, 'SAVE');			
				//swal("GUARDAR", data.errmsg, "success").done();
				showBrowser();
			}else{
				toastr.error(data.errmsg, 'SAVE');	
				//swal("GUARDAR", data.errmsg, "error").done();
			}
			
		});
	}
	
	

</script>
	 
	  
	  